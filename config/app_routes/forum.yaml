multi:
    controller: App\Controller\ForumController::multi
    defaults: { sortBy: hot }
    path: /{names}/{sortBy}
    requirements:
        names: '(?:\w{3,25}\+){1,70}\w{3,25}'
        sortBy: "%submission_sort_modes%"

forum:
    controller: App\Controller\ForumController::front
    defaults: { sortBy: hot }
    path: /{forum_name}/{sortBy}
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", sortBy: "%submission_sort_modes%" }

forum_feed_legacy_redirect:
    controller: Symfony\Bundle\FrameworkBundle\Controller\RedirectController::redirectAction
    defaults: { route: forum_feed, ignoreAttributes: [page] }
    path: /f/{forum_name}/{sortBy}/{page}.atom
    requirements: { page: \d+ }

forum_legacy_redirect:
    controller: Symfony\Bundle\FrameworkBundle\Controller\RedirectController::urlRedirectAction
    methods: [GET]
    path: /f{path}
    requirements: { path: '/(?:\w{3,25}\+){0,70}\w{3,25}/.*' }

forum_feed:
    controller: App\Controller\ForumController::feed
    defaults: { sortBy: hot, _format: xml }
    path: /{forum_name}/{sortBy}.atom
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", sortBy: "%submission_sort_modes%" }

edit_forum:
    controller: App\Controller\ForumController::editForum
    path: /{forum_name}/edit
    methods: [GET, POST]
    requirements: { forum_name: "%forum_regex%" }

delete_forum:
    controller: App\Controller\ForumController::delete
    path: /{forum_name}/delete
    methods: [GET, POST]
    requirements: { forum_name: "%forum_regex%" }

forum_bans:
    controller: App\Controller\ForumController::bans
    defaults: { page: 1 }
    path: /{forum_name}/bans
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", page: \d+ }

forum_ban_history:
    controller: App\Controller\ForumController::banHistory
    defaults: { page: 1 }
    path: /{forum_name}/bans/history/{username}/{page}
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", page: \d+ }

forum_ban:
    controller: App\Controller\ForumController::ban
    path: /{forum_name}/ban/{username}
    methods: [GET, POST]
    requirements: { forum_name: "%forum_regex%" }

forum_unban:
    controller: App\Controller\ForumController::unban
    path: /{forum_name}/unban/{username}
    methods: [GET, POST]
    requirements: { forum_name: "%forum_regex%" }

forum_moderators:
    controller: App\Controller\ForumController::moderators
    defaults: { page: 1 }
    path: /{forum_name}/moderators/{page}
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", page: \d+ }

add_moderator:
    controller: App\Controller\ForumController::addModerator
    path: /{forum_name}/add_moderator
    methods: [GET, POST]
    requirements: { forum_name: "%forum_regex%" }

remove_moderator:
    controller: App\Controller\ForumController::removeModerator
    path: /{forum_name}/remove_moderator/{moderator_id}
    methods: [POST]
    requirements: { forum_name: "%forum_regex%", moderator_id: "%uuid_regex%" }

moderation_log:
    controller: App\Controller\ForumController::moderationLog
    defaults: { page: 1 }
    path: /{forum_name}/moderation_log/{page}
    methods: [GET]
    requirements: { forum_name: "%forum_regex%", page: \d+ }

global_moderation_log:
    controller: App\Controller\ForumController::globalModerationLog
    defaults: { page: 1 }
    path: /moderation_log/{page}
    methods: [GET]
    requirements: { page: \d+ }

subscribe:
    controller: App\Controller\ForumController::subscribe
    defaults: { subscribe: true, _format: html }
    path: /{forum_name}/subscribe.{_format}
    methods: [POST]
    requirements: { forum_name: "%forum_regex%", _format: html|json }
    options: { expose: true }

unsubscribe:
    controller: App\Controller\ForumController::subscribe
    defaults: { subscribe: false, _format: html }
    path: /{forum_name}/unsubscribe.{_format}
    methods: [POST]
    requirements: { forum_name: "%forum_regex%", _format: html|json }
    options: { expose: true }

create_forum:
    controller: App\Controller\ForumController::createForum
    path: /forums/create
    methods: [GET, POST]

forum_list:
    controller: App\Controller\ForumController::list
    defaults: { page: 1, sortBy: by_submissions }
    path: /forums/{sortBy}/{page}
    methods: [GET]
    requirements: { page: \d+, sortBy: by_name|by_title|by_subscribers|by_submissions }

forum_webhooks:
    controller: App\Controller\ForumController::webhooks
    methods: [GET]
    path: /{forum_name}/webhooks
    requirements: { forum_name: "%forum_regex%" }

forum_add_webhook:
    controller: App\Controller\ForumController::addWebhook
    methods: [GET, POST]
    path: /{forum_name}/add_webhook
    requirements: { forum_name: "%forum_regex%" }

forum_edit_webhook:
    controller: App\Controller\ForumController::editWebhook
    methods: [GET, POST]
    path: /{forum_name}/edit_webhook/{webhook_id}
    requirements: { forum_name: "%forum_regex%", webhook_id: "%uuid_regex%" }

forum_remove_webhook:
    controller: App\Controller\ForumController::removeWebhook
    methods: [POST]
    path: /{forum_name}/remove_webhook
    requirements: { forum_name: "%forum_regex%" }

forums_by_category:
    controller: App\Controller\ForumController::listCategories
    path: /forums/by_category
    methods: [GET]
